annotations:
  - border_color: '#FFFFFF00'
    border_style: 2,2
    color: '#FAFAFA'
    rotation: 0
    text_bold: false
    text_content: |-
      DMVPN Overlay (mGRE, Phase 3)
      HQ1 Tu0: 10.255.0.1/24 (primary hub)
      HQ2 Tu0: 10.255.0.2/24 (secondary hub; higher tunnel delay)
      Spoke1/2/3 Tu0: 10.255.0.11/12/13
      NHRP: network-id 10, tunnel key 10, auth DMVPN10
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: -1000.0
    y1: 40.0
    z_index: 1
  - border_color: '#00000000'
    border_style: ''
    color: '#FFFFFF'
    rotation: 0
    text_bold: false
    text_content: |-
      “LANs” (all on Loopback1)
      HQ1 Lo1 172.16.1.1/24 (172.16.1.0/24)
      HQ2 Lo1 172.16.2.1/24 (172.16.2.0/24)
      Spoke1 Lo1 10.1.1.1/24 (10.1.1.0/24)
      Spoke2 Lo1 10.2.2.1/24 (10.2.2.0/24)
      Spoke3 Lo1 10.3.3.1/24 (10.3.3.0/24)
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: -160.0
    y1: 40.0
    z_index: 2
smart_annotations: []
nodes:
  - boot_disk_size: null
    configuration: |-
      hostname HQ1
      !
      interface Ethernet0/1
       description WAN to ISP (-> ISP e1/1 .2/30)
       ip address 203.0.113.1 255.255.255.252
       no shut
      !
      interface Ethernet0/0
       shutdown
      !
      interface Loopback1
       description HQ1 LAN
       ip address 172.16.1.1 255.255.255.0
      !
      interface Tunnel0
       description DMVPN Hub (Primary)
       ip address 10.255.0.1 255.255.255.0
       ip mtu 1400
       ip tcp adjust-mss 1360
       tunnel source Ethernet0/1
       tunnel mode gre multipoint
       tunnel key 10
       ip nhrp authentication DMVPN10
       ip nhrp network-id 10
       ip nhrp map multicast dynamic
       ip nhrp redirect
       no ip split-horizon eigrp 100
       bandwidth 10000
       delay 1000
       no shut
      !
      router eigrp 100
       eigrp router-id 1.1.1.1
       passive-interface default
       no passive-interface Tunnel0
       network 10.255.0.0 0.0.0.255
       network 172.16.1.0 0.0.0.255
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n0
    image_definition: null
    label: HQ1
    node_definition: iol-xe
    parameters: {}
    ram: null
    tags: []
    x: -440
    y: -40
    interfaces:
      - id: i0
        label: Loopback0
        mac_address: null
        type: loopback
      - id: i1
        label: Ethernet0/0
        mac_address: null
        type: physical
        slot: 0
      - id: i2
        label: Ethernet0/1
        mac_address: null
        type: physical
        slot: 1
      - id: i3
        label: Ethernet0/2
        mac_address: null
        type: physical
        slot: 2
      - id: i4
        label: Ethernet0/3
        mac_address: null
        type: physical
        slot: 3
  - boot_disk_size: null
    configuration: |-
      hostname HQ2
      !
      interface Ethernet0/2
       description WAN to ISP (-> ISP e1/2 .6/30)
       ip address 203.0.113.5 255.255.255.252
       no shut
      !
      interface Ethernet0/0
       shutdown
      !
      interface Loopback1
       description HQ2 LAN
       ip address 172.16.2.1 255.255.255.0
      !
      interface Tunnel0
       description DMVPN Hub (Secondary)
       ip address 10.255.0.2 255.255.255.0
       ip mtu 1400
       ip tcp adjust-mss 1360
       tunnel source Ethernet0/2
       tunnel mode gre multipoint
       tunnel key 10
       ip nhrp authentication DMVPN10
       ip nhrp network-id 10
       ip nhrp map multicast dynamic
       ip nhrp redirect
       no ip split-horizon eigrp 100
       bandwidth 10000
       delay 5000
       no shut
      !
      router eigrp 100
       eigrp router-id 2.2.2.2
       passive-interface default
       no passive-interface Tunnel0
       network 10.255.0.0 0.0.0.255
       network 172.16.2.0 0.0.0.255
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n1
    image_definition: null
    label: HQ2
    node_definition: iol-xe
    parameters: {}
    ram: null
    tags: []
    x: -280
    y: -40
    interfaces:
      - id: i0
        label: Loopback0
        mac_address: null
        type: loopback
      - id: i1
        label: Ethernet0/0
        mac_address: null
        type: physical
        slot: 0
      - id: i2
        label: Ethernet0/1
        mac_address: null
        type: physical
        slot: 1
      - id: i3
        label: Ethernet0/2
        mac_address: null
        type: physical
        slot: 2
      - id: i4
        label: Ethernet0/3
        mac_address: null
        type: physical
        slot: 3
  - boot_disk_size: null
    configuration: |-
      hostname Spoke2
      !
      interface Ethernet0/0
       description WAN to ISP (-> ISP e0/0 .14/30)
       ip address 203.0.113.13 255.255.255.252
       no shut
      !
      interface Ethernet0/1
       shutdown
      !
      interface Loopback1
       description Spoke2 LAN
       ip address 10.2.2.1 255.255.255.0
      !
      interface Tunnel0
       description DMVPN Spoke
       ip address 10.255.0.12 255.255.255.0
       ip mtu 1400
       ip tcp adjust-mss 1360
       tunnel source Ethernet0/0
       tunnel mode gre multipoint
       tunnel key 10
       ip nhrp authentication DMVPN10
       ip nhrp network-id 10
       ip nhrp nhs 10.255.0.1
       ip nhrp nhs 10.255.0.2
       ip nhrp map 10.255.0.1 203.0.113.1
       ip nhrp map 10.255.0.2 203.0.113.5
       ip nhrp map multicast 203.0.113.1
       ip nhrp map multicast 203.0.113.5
       ip nhrp shortcut
       tunnel path-mtu-discovery
       bandwidth 2000
       delay 1000
       no shut
      !
      router eigrp 100
       eigrp router-id 12.12.12.12
       passive-interface default
       no passive-interface Tunnel0
       network 10.255.0.0 0.0.0.255
       network 10.2.2.0 0.0.0.255
       eigrp stub connected summary
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n2
    image_definition: null
    label: Spoke2
    node_definition: iol-xe
    parameters: {}
    ram: null
    tags: []
    x: -360
    y: 280
    interfaces:
      - id: i0
        label: Loopback0
        mac_address: null
        type: loopback
      - id: i1
        label: Ethernet0/0
        mac_address: null
        type: physical
        slot: 0
      - id: i2
        label: Ethernet0/1
        mac_address: null
        type: physical
        slot: 1
      - id: i3
        label: Ethernet0/2
        mac_address: null
        type: physical
        slot: 2
      - id: i4
        label: Ethernet0/3
        mac_address: null
        type: physical
        slot: 3
  - boot_disk_size: null
    configuration: |-
      hostname Spoke3
      !
      interface Ethernet0/0
       description WAN to ISP (-> ISP e1/3 .18/30)
       ip address 203.0.113.17 255.255.255.252
       no shut
      !
      interface Ethernet0/1
       shutdown
      !
      interface Loopback1
       description Spoke3 LAN
       ip address 10.3.3.1 255.255.255.0
      !
      interface Tunnel0
       description DMVPN Spoke
       ip address 10.255.0.13 255.255.255.0
       ip mtu 1400
       ip tcp adjust-mss 1360
       tunnel source Ethernet0/0
       tunnel mode gre multipoint
       tunnel key 10
       ip nhrp authentication DMVPN10
       ip nhrp network-id 10
       ip nhrp nhs 10.255.0.1
       ip nhrp nhs 10.255.0.2
       ip nhrp map 10.255.0.1 203.0.113.1
       ip nhrp map 10.255.0.2 203.0.113.5
       ip nhrp map multicast 203.0.113.1
       ip nhrp map multicast 203.0.113.5
       ip nhrp shortcut
       tunnel path-mtu-discovery
       bandwidth 2000
       delay 1000
       no shut
      !
      router eigrp 100
       eigrp router-id 13.13.13.13
       passive-interface default
       no passive-interface Tunnel0
       network 10.255.0.0 0.0.0.255
       network 10.3.3.0 0.0.0.255
       eigrp stub connected summary
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n3
    image_definition: null
    label: Spoke3
    node_definition: iol-xe
    parameters: {}
    ram: null
    tags: []
    x: -200
    y: 240
    interfaces:
      - id: i0
        label: Loopback0
        mac_address: null
        type: loopback
      - id: i1
        label: Ethernet0/0
        mac_address: null
        type: physical
        slot: 0
      - id: i2
        label: Ethernet0/1
        mac_address: null
        type: physical
        slot: 1
      - id: i3
        label: Ethernet0/2
        mac_address: null
        type: physical
        slot: 2
      - id: i4
        label: Ethernet0/3
        mac_address: null
        type: physical
        slot: 3
  - boot_disk_size: null
    configuration: |-
      hostname Spoke1
      !
      interface Ethernet0/0
       description WAN to ISP (-> ISP e0/1 .10/30)
       ip address 203.0.113.9 255.255.255.252
       no shut
      !
      interface Ethernet0/1
       shutdown
      !
      interface Loopback1
       description Spoke1 LAN
       ip address 10.1.1.1 255.255.255.0
      !
      interface Tunnel0
       description DMVPN Spoke
       ip address 10.255.0.11 255.255.255.0
       ip mtu 1400
       ip tcp adjust-mss 1360
       tunnel source Ethernet0/0
       tunnel mode gre multipoint
       tunnel key 10
       ip nhrp authentication DMVPN10
       ip nhrp network-id 10
       ip nhrp nhs 10.255.0.1
       ip nhrp nhs 10.255.0.2
       ip nhrp map 10.255.0.1 203.0.113.1
       ip nhrp map 10.255.0.2 203.0.113.5
       ip nhrp map multicast 203.0.113.1
       ip nhrp map multicast 203.0.113.5
       ip nhrp shortcut
       tunnel path-mtu-discovery
       bandwidth 2000
       delay 1000
       no shut
      !
      router eigrp 100
       eigrp router-id 11.11.11.11
       passive-interface default
       no passive-interface Tunnel0
       network 10.255.0.0 0.0.0.255
       network 10.1.1.0 0.0.0.255
       eigrp stub connected summary
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n4
    image_definition: null
    label: Spoke1
    node_definition: iol-xe
    parameters: {}
    ram: null
    tags: []
    x: -520
    y: 240
    interfaces:
      - id: i0
        label: Loopback0
        mac_address: null
        type: loopback
      - id: i1
        label: Ethernet0/0
        mac_address: null
        type: physical
        slot: 0
      - id: i2
        label: Ethernet0/1
        mac_address: null
        type: physical
        slot: 1
      - id: i3
        label: Ethernet0/2
        mac_address: null
        type: physical
        slot: 2
      - id: i4
        label: Ethernet0/3
        mac_address: null
        type: physical
        slot: 3
  - boot_disk_size: null
    configuration: |-
      hostname ISP
      !
      interface Ethernet0/0
       description to Spoke2
       ip address 203.0.113.14 255.255.255.252
       no shut
      !
      interface Ethernet0/1
       description to Spoke1
       ip address 203.0.113.10 255.255.255.252
       no shut
      !
      interface Ethernet0/2
       description UNUSED
       shutdown
      !
      interface Ethernet0/3
       description UNUSED
       shutdown
      !
      interface Ethernet1/0
       description UNUSED
       shutdown
      !
      interface Ethernet1/1
       description to HQ1
       ip address 203.0.113.2 255.255.255.252
       no shut
      !
      interface Ethernet1/2
       description to HQ2
       ip address 203.0.113.6 255.255.255.252
       no shut
      !
      interface Ethernet1/3
       description to Spoke3
       ip address 203.0.113.18 255.255.255.252
       no shut
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n5
    image_definition: null
    label: ISP
    node_definition: iol-xe
    parameters: {}
    ram: null
    tags: []
    x: -360
    y: 120
    interfaces:
      - id: i0
        label: Loopback0
        mac_address: null
        type: loopback
      - id: i1
        label: Ethernet0/0
        mac_address: null
        type: physical
        slot: 0
      - id: i2
        label: Ethernet0/1
        mac_address: null
        type: physical
        slot: 1
      - id: i3
        label: Ethernet0/2
        mac_address: null
        type: physical
        slot: 2
      - id: i4
        label: Ethernet0/3
        mac_address: null
        type: physical
        slot: 3
      - id: i5
        label: Ethernet1/0
        mac_address: null
        type: physical
        slot: 4
      - id: i6
        label: Ethernet1/1
        mac_address: null
        type: physical
        slot: 5
      - id: i7
        label: Ethernet1/2
        mac_address: null
        type: physical
        slot: 6
      - id: i8
        label: Ethernet1/3
        mac_address: null
        type: physical
        slot: 7
links:
  - id: l0
    n1: n4
    n2: n5
    i1: i1
    i2: i2
    conditioning: {}
    label: Spoke1-Ethernet0/0<->ISP-Ethernet0/1
  - id: l1
    n1: n2
    n2: n5
    i1: i1
    i2: i1
    conditioning: {}
    label: Spoke2-Ethernet0/0<->ISP-Ethernet0/0
  - id: l2
    n1: n3
    n2: n5
    i1: i1
    i2: i8
    conditioning: {}
    label: Spoke3-Ethernet0/0<->ISP-Ethernet1/3
  - id: l3
    n1: n5
    n2: n0
    i1: i6
    i2: i2
    conditioning: {}
    label: ISP-Ethernet1/1<->HQ1-Ethernet0/1
  - id: l4
    n1: n5
    n2: n1
    i1: i7
    i2: i3
    conditioning: {}
    label: ISP-Ethernet1/2<->HQ2-Ethernet0/2
lab:
  description: 'DMVPN Dual-Hub Phase3 (EIGRP 100) — exact ISP port mapping'
  notes: ''
  title: DMVPN Fun
  version: 0.3.0
